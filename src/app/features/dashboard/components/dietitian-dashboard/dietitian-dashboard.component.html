<div class="surface-card p-4 shadow-2 border-round">
    <div class="flex align-items-center justify-content-between mb-4">
        <div class="text-2xl font-bold text-900">Pending Appointment Requests</div>
        <p-button icon="pi pi-refresh" [rounded]="true" [text]="true" (onClick)="loadPendingAppointments()"
            [loading]="isLoading"></p-button>
    </div>

    <p-table [value]="pendingAppointments" [responsiveLayout]="'stack'" styleClass="p-datatable-sm">
        <ng-template pTemplate="header">
            <tr>
                <th>Patient</th>
                <th>Date</th>
                <th>Time</th>
                <th>Actions</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-appt>
            <tr>
                <td>
                    <span class="p-column-title font-bold">Patient</span>
                    {{ appt.patientName }}
                </td>
                <td>
                    <span class="p-column-title font-bold">Date</span>
                    {{ appt.appointmentDate | date:'mediumDate' }}
                </td>
                <td>
                    <span class="p-column-title font-bold">Time</span>
                    {{ appt.timeSlot }}
                </td>
                <td>
                    <span class="p-column-title font-bold">Actions</span>
                    <div class="flex gap-2">
                        <p-button icon="pi pi-check" severity="success" [rounded]="true" [text]="true" pTooltip="Accept"
                            (onClick)="updateStatus(appt, 'CONFIRMED')"></p-button>
                        <p-button icon="pi pi-times" severity="danger" [rounded]="true" [text]="true" pTooltip="Reject"
                            (onClick)="updateStatus(appt, 'REJECTED')"></p-button>
                    </div>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="4" class="text-center p-4 text-600">
                    <i class="pi pi-check-circle text-4xl mb-3 block text-primary"></i>
                    No pending appointment requests.
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>